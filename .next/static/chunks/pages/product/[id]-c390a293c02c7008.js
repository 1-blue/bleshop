(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6360],{8871:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return c(6312)}])},5797:function(a,b,c){"use strict";c.d(b,{ie:function(){return f},vc:function(){return d}});var d=function(a,b,c){var d=new Date(a),e=[],f="",g=b.match(/[^YMDhms]/g),n=0;return e.push(h(d,b)),e.push(i(d,b)),e.push(j(d,b)),e.push(k(d,b)),e.push(l(d,b)),e.push(m(d,b)),e.forEach(function(a){if(a){if(c)return f+="".concat(a).concat(c);var b="";g?b=g[n]||"":c="",n++,f+="".concat(a).concat(b)}}),f},e=function(a){var b=new Date(a),c=new Date().getTime()-b.getTime();return c/1e3<60?"".concat(Math.floor(c/1e3),"초전"):c/1e3/60<60?"".concat(Math.floor(c/1e3/60),"분전"):c/1e3/60/60<24?"".concat(Math.floor(c/1e3/60/60),"시간전"):c/1e3/60/60/24<30?"".concat(Math.floor(c/1e3/60/60/24),"일전"):c/1e3/60/60/24/30<12?"".concat(Math.floor(c/1e3/60/60/24/30),"개월전"):"".concat(Math.floor(c/1e3/60/60/24/30/12),"년전")},f=function(a,b){return Date.now()-new Date(a).getTime()>6048e5?d(a,b):e(a)},g=function(a){switch(a){case"year":return/Y{2}/g;case"month":return/M/g;case"day":return/D/g;case"hour":return/h/g;case"minute":return/m/g;case"second":return/s/g}},h=function(a,b){var c=b.match(g("year"));if(null!==c){if(1===c.length)return+String(a.getFullYear()).slice(2);if(2===c.length)return a.getFullYear()}},i=function(a,b){var c=null,d=b.match(g("month"));if(null!==d)return c=a.getMonth()+1,2===d.length&&c<10&&(c="0".concat(c)),c},j=function(a,b){var c=null,d=b.match(g("day"));if(null!==d)return c=a.getDate(),2===d.length&&c<10&&(c="0".concat(c)),c},k=function(a,b){var c=null,d=b.match(g("hour"));if(null!==d)return c=a.getHours(),2===d.length&&c<10&&(c="0".concat(c)),c},l=function(a,b){var c=null,d=b.match(g("minute"));if(null!==d)return c=a.getMinutes(),(null==d?void 0:d.length)===2&&c<10&&(c="0".concat(c)),c},m=function(a,b){var c=null,d=b.match(g("second"));if(null!==d)return c=a.getSeconds(),(null==d?void 0:d.length)===2&&c<10&&(c="0".concat(c)),c}},6312:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSG":function(){return M}});var d=c(7568),e=c(2670),f=c(1799),g=c(9396),h=c(9534),i=c(9815),j=c(4051),k=c.n(j),l=c(5893),m=c(7294),n=c(4480),o=c(3299),p=c(7536),q=c(1163),r=c(2920),s=c(5152),t=c.n(s),u=c(9923),v=c(5797),w=c(2483),x=c(9800),y=c(4629),z=c(9669),A=t()(function(){return c.e(565).then(c.bind(c,565))},{loadableGenerated:{webpack:function(){return[565]}},suspense:!0}),B=t()(function(){return c.e(740).then(c.bind(c,740))},{loadableGenerated:{webpack:function(){return[740]}},suspense:!0}),C=t()(function(){return c.e(7340).then(c.bind(c,7340))},{loadableGenerated:{webpack:function(){return[7340]}},suspense:!0}),D=t()(function(){return c.e(7025).then(c.bind(c,7025))},{loadableGenerated:{webpack:function(){return[7025]}},suspense:!0}),E=t()(function(){return Promise.all([c.e(7842),c.e(8312)]).then(c.bind(c,5129))},{loadableGenerated:{webpack:function(){return[5129]}},suspense:!0}),F=t()(function(){return Promise.all([c.e(5675),c.e(1304)]).then(c.bind(c,1304))},{loadableGenerated:{webpack:function(){return[1304]}},suspense:!0}),G=t()(function(){return c.e(6613).then(c.bind(c,6613))},{loadableGenerated:{webpack:function(){return[6613]}},suspense:!0}),H=t()(function(){return Promise.resolve().then(c.bind(c,3654))},{loadableGenerated:{webpack:function(){return[3654]}},suspense:!0}),I=t()(function(){return Promise.all([c.e(5675),c.e(3195)]).then(c.bind(c,3195))},{loadableGenerated:{webpack:function(){return[3195]}},suspense:!0}),J=t()(function(){return c.e(5328).then(c.bind(c,5328))},{loadableGenerated:{webpack:function(){return[5328]}},suspense:!0}),K=t()(function(){return Promise.all([c.e(5675),c.e(7842),c.e(8956),c.e(3300),c.e(4393)]).then(c.bind(c,7261))},{loadableGenerated:{webpack:function(){return[7261]}},suspense:!0}),L=function(a){var b,c=a.product,j=a.relatedProducts,s=a.reviews,t=(0,o.useSession)().data,L=(0,q.useRouter)(),M=(0,p.cI)({defaultValues:{quantity:1}}),N=M.register,O=M.watch,P=M.setValue,Q=M.handleSubmit,R=M.getValues,S=O("quantity"),T=(0,m.useState)(!1),U=T[0],V=T[1],W=(0,m.useCallback)(function(){if(c){if(!(null==t?void 0:t.user))return r.Am.error("로그인 후에 시도해주세요!");r.Am.info("배송지를 선택해주세요!"),V(!0)}},[t,c,V]),X=(0,m.useState)(0),Y=X[0],Z=X[1],$=(0,m.useState)(!1),_=$[0],aa=$[1];(0,m.useEffect)(function(){c&&(null==t?void 0:t.user)&&(0,d.Z)(k().mark(function a(){var b,d;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.Z.wishService.apiGetWish({productIdx:c.idx});case 2:aa(d=(b=a.sent).data.isWish);case 5:case"end":return a.stop()}},a)}))()},[c,t]);var ab=(0,m.useCallback)((0,d.Z)(k().mark(function a(){var b,c,d,g,h,i;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!("string"!=typeof L.query.id)){a.next=2;break}return a.abrupt("return");case 2:if(b=r.Am.loading("찜하기 요청을 처리중입니다."),a.prev=3,!_){a.next=13;break}return a.next=7,w.Z.wishService.apiDeleteWish({productIdx:+L.query.id});case 7:d=(c=a.sent).data.message,r.Am.update(b,{render:d,type:"success",isLoading:!1,autoClose:1500}),aa(!1),a.next=19;break;case 13:return a.next=15,w.Z.wishService.apiCreateWish((0,f.Z)({productIdx:+L.query.id},R()));case 15:h=(g=a.sent).data.message,r.Am.update(b,{render:h,type:"success",isLoading:!1,autoClose:1500}),aa(!0);case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(3),console.error(a.t0),(0,e.Z)(a.t0,z.AxiosError)?r.Am.update(b,{render:null===(i=a.t0.response)|| void 0===i?void 0:i.data.message,type:"error",isLoading:!1,autoClose:1500}):r.Am.update(b,{render:"알 수 없는 에러가 발생했습니다.",type:"error",isLoading:!1,autoClose:1500});case 25:case"end":return a.stop()}},a,null,[[3,21]])})),[_,L.query,R]),ac=(0,m.useCallback)((0,d.Z)(k().mark(function a(){var b,c,d,h;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!("string"!=typeof L.query.id)){a.next=2;break}return a.abrupt("return");case 2:return b=r.Am.loading("장바구니에 상품을 넣는중입니다."),a.prev=3,a.next=6,w.Z.basketService.apiCreateBasket((0,g.Z)((0,f.Z)({},R()),{productIdx:+L.query.id}));case 6:d=(c=a.sent).data.message,r.Am.update(b,{render:d,type:"success",isLoading:!1,autoClose:1500}),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0),(0,e.Z)(a.t0,z.AxiosError)?r.Am.update(b,{render:null===(h=a.t0.response)|| void 0===h?void 0:h.data.message,type:"error",isLoading:!1,autoClose:1500}):r.Am.update(b,{render:"알 수 없는 에러가 발생했습니다.",type:"error",isLoading:!1,autoClose:1500});case 15:case"end":return a.stop()}},a,null,[[3,11]])})),[R,L.query]),ad=(0,n.Zl)(x.Z.productService.relatedProductsState);(0,m.useEffect)(function(){ad(j)},[ad,j]);var ae=(0,n.Zl)(x.Z.reviewService.reviewsState);return((0,m.useEffect)(function(){return ae(s)},[ae,s]),(0,m.useEffect)(function(){if(c){var a=JSON.parse(localStorage.getItem("watched")||"[]");if(Array.isArray(a)){var b=[],d=a.findIndex(function(a){return a.idx===c.idx});if(-1===d){var e=c.idx,f=c.photo,g=c.name;(0,h.Z)(c,["idx","photo","name"]),b=[{idx:e,photo:f,name:g}].concat((0,i.Z)(a))}else{var j=a.splice(d,1);b=(0,i.Z)(j).concat((0,i.Z)(a))}b.length>10&&b.pop(),localStorage.setItem("watched",JSON.stringify(b))}}},[c]),L.isFallback)?(0,l.jsx)(H,{}):null===c?(0,l.jsx)(G,{message:"상품이 존재하지 않습니다."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.Z,{title:"BleShop - ".concat(c.name),description:c.description,photo:c.photo}),(0,l.jsxs)("article",{className:"pt-4 space-y-4",children:[(0,l.jsx)(C,{title:"돌아가기"}),(0,l.jsxs)(A,{className:"space-y-2",hasPadding:!0,children:[(0,l.jsx)(B,{text:"상품 이미지들"}),(0,l.jsxs)(E,{currentDot:Y,setCurrentDot:Z,children:[(0,l.jsx)(F,{path:c.photo,className:"w-full h-[200px] xs:h-[350px] md:h-[500px]",alt:"상품 대표 이미지",cover:!0},c.photo),c.photos.map(function(a){var b=a.path;return(0,l.jsx)(F,{path:b,className:"w-full h-[200px] xs:h-[350px] md:h-[500px]",alt:"상품 이미지",cover:!0},b)})]}),(0,l.jsx)("div",{className:"pb-10"})]}),(0,l.jsxs)(A,{className:"flex flex-col space-y-2",hasPadding:!0,children:[(0,l.jsx)(B,{text:c.name}),(0,l.jsxs)("div",{className:"flex flex-col divide-y-2 space-y-2 text-sm sm:text-base",children:[(0,l.jsxs)("span",{className:"px-2 font-bold",children:[(0,u.Wb)(c.price),"원"]}),(0,l.jsx)("span",{className:"px-2 pt-2",children:c.brand}),(0,l.jsx)("span",{className:"px-2 pt-2",children:c.company})]}),(0,l.jsx)("time",{className:"self-end text-[8px] sm:text-xs text-gray-400",children:(0,v.ie)(c.updatedAt,"YYYY-MM-DD-hh-mm-ss")})]}),(0,l.jsxs)(A,{className:"flex flex-col space-y-2",hasPadding:!0,children:[(0,l.jsx)(B,{text:"상품 설명"}),(0,l.jsx)("p",{className:"text-sm sm:text-base whitespace-pre-line",children:c.description})]}),(0,l.jsxs)(A,{className:"flex flex-col space-y-2",hasPadding:!0,children:[(0,l.jsx)(B,{text:"옵션 선택"}),(0,l.jsxs)("form",{className:"flex flex-col",children:[c.size&&(0,l.jsx)(D,{name:"사이즈",register:N("size"),children:c.size.split(",").map(function(a){return(0,l.jsx)("option",{children:a},a)})}),c.color&&(0,l.jsx)(D,{name:"색상",register:N("color"),children:null===(b=c.color)|| void 0===b?void 0:b.split(",").map(function(a){return(0,l.jsx)("option",{children:a},a)})}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"rounded-sm border border-gray-600",children:[(0,l.jsx)("button",{type:"button",onClick:function(){return P("quantity",S-1>=1?S-1:S)},className:"py-1 px-1.5 sm:px-2 text-xs sm:text-base focus:outline-blue-500",children:"–"}),(0,l.jsx)("span",{className:"py-1 px-1.5 sm:px-2 text-sm sm:text-base border-x-2 border-gray-300",children:O("quantity")}),(0,l.jsx)("button",{type:"button",onClick:function(){return P("quantity",S+1)},className:"py-1 px-1.5 sm:px-2 text-xs sm:text-base focus:outline-blue-500",children:"+"})]}),(0,l.jsxs)("span",{className:"text-sm sm:text-base",children:["가격: ",(0,u.Wb)(S*c.price),"원"]})]})]})]}),(0,l.jsxs)("form",{onSubmit:Q(W),className:"flex p-2 space-x-2 xsm:p-3 md:p-4 bg-white rounded-md shadow-2xl",children:[(0,l.jsx)("button",{type:"button",className:"flex-1 p-1 xs:p-1.5 sm:p-2 bg-red-400 text-xs xs:text-sm sm:text-base text-white font-bold hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:ab,children:_?"취소하기":"찜하기"}),(0,l.jsx)("button",{type:"submit",className:"flex-1 p-1 xs:p-1.5 sm:p-2 bg-blue-400 text-xs xs:text-sm sm:text-base text-white font-bold hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"구매하기"}),(0,l.jsx)("button",{type:"button",className:"flex-1 p-1 xs:p-1.5 sm:p-2 bg-indigo-400 text-xs xs:text-sm sm:text-base text-white font-bold hover:bg-indigo-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:ac,children:"장바구니"})]}),U&&(0,l.jsx)(J,{products:[c],onCloseModal:function(){return V(!1)},singleData:[{color:R("color"),size:R("size"),quantity:S,productIdx:c.idx},]}),(0,l.jsxs)(A,{className:"flex flex-col space-y-2 p-4",children:[(0,l.jsx)(B,{text:"리뷰들"}),(0,l.jsx)(K,{productIdx:c.idx})]}),(0,l.jsxs)(A,{className:"flex flex-col space-y-2",hasPadding:!0,children:[(0,l.jsx)(B,{text:"연관 상품들"}),(0,l.jsx)(I,{productIdx:c.idx,keywords:c.keywords.map(function(a){return a.keywordIdx})})]})]})]})},M=!0;b.default=L},9396:function(a,b,c){"use strict";function d(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}c.d(b,{Z:function(){return d}})},9534:function(a,b,c){"use strict";function d(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}c.d(b,{Z:function(){return d}})},9815:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(943),e=c(3375),f=c(1566);function g(a){return function(a){if(Array.isArray(a))return(0,d.Z)(a)}(a)||(0,e.Z)(a)||(0,f.Z)(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(a){a.O(0,[6819,7536,2483,5577,9774,2888,179],function(){var b;return a(a.s=8871)}),_N_E=a.O()}])