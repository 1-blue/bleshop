(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8776],{7120:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/upload",function(){return c(5234)}])},4030:function(a,b,c){"use strict";var d=c(5893);c(7294);var e=c(9198),f=c.n(e),g=c(7536),h=c(3006),i=c(5842),j=c(8201);c(9828),(0,e.registerLocale)("ko",h.Z),b.Z=function(a){var b=a.name,c=a.control,e=a.errorMessage;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z,{name:b}),(0,d.jsx)("div",{className:"min-w-[200px] max-w-[600px] w-full",children:(0,d.jsx)(g.Qr,{control:c,name:"information.period",rules:{required:!0},render:function(a){var c=a.field,e=c.onChange,g=c.value;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f(),{id:b,dateFormat:"yyyy년 MM월 dd일",onChange:function(a){return e(a)},selected:g,minDate:new Date,locale:"ko",placeholderText:"판매 종료 날짜를 선택해주세요.",className:"w-full px-2 xs:px-4 py-2 font-semibold text-xs xs:text-base rounded-sm border-2 border-gray-200 focus:border-blue-400 focus:outline-none placeholder:text-[8px] xs:placeholder:text-xs"})})}})}),(0,d.jsx)(j.Z,{errorMessage:e})]})}},8201:function(a,b,c){"use strict";var d=c(5893),e=c(9923),f=function(a){var b=a.errorMessage,c=a.className;return(0,d.jsx)("span",{className:(0,e.Nn)("min-w-[200px] max-w-[600px] w-full text-red-600 mb-4 mt-1 font-semibold text-[8px] xs:text-xs",c||""),children:b&&"※ "+b})};b.Z=f},5842:function(a,b,c){"use strict";var d=c(5893),e=c(9923),f=function(a){var b=a.name,c=a.className;return(0,d.jsx)("label",{htmlFor:b,className:(0,e.Nn)("min-w-[200px] max-w-[600px] w-full font-bolder text-xs xs:text-sm md:text-base cursor-pointer",c||""),children:b})};b.Z=f},5234:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return I}});var d=c(7568),e=c(2670),f=c(1799),g=c(9396),h=c(4051),i=c.n(h),j=c(5893),k=c(7294),l=c(4480),m=c(7536),n=c(2920),o=c(1163),p=c(3299),q=c(5152),r=c.n(q),s=c(9923),t=c(2483),u=c(9800),v=c(4629),w=c(4030),x=c(9669),y=r()(function(){return c.e(3341).then(c.bind(c,3341))},{loadableGenerated:{webpack:function(){return[3341]}},suspense:!0}),z=r()(function(){return c.e(1566).then(c.bind(c,1867))},{loadableGenerated:{webpack:function(){return[1867]}},suspense:!0}),A=r()(function(){return c.e(1887).then(c.bind(c,1887))},{loadableGenerated:{webpack:function(){return[1887]}},suspense:!0}),B=r()(function(){return c.e(1432).then(c.bind(c,1432))},{loadableGenerated:{webpack:function(){return[1432]}},suspense:!0}),C=r()(function(){return c.e(8526).then(c.bind(c,7025))},{loadableGenerated:{webpack:function(){return[7025]}},suspense:!0}),D=r()(function(){return Promise.all([c.e(5675),c.e(841)]).then(c.bind(c,862))},{loadableGenerated:{webpack:function(){return[862]}},suspense:!0}),E=r()(function(){return Promise.all([c.e(5675),c.e(7842),c.e(8026)]).then(c.bind(c,1423))},{loadableGenerated:{webpack:function(){return[1423]}},suspense:!0}),F=r()(function(){return c.e(5865).then(c.bind(c,5865))},{loadableGenerated:{webpack:function(){return[5865]}},suspense:!0}),G=r()(function(){return c.e(6987).then(c.bind(c,6987))},{loadableGenerated:{webpack:function(){return[6987]}},suspense:!0}),H=function(){var a,b,c,h,q,r,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=(0,o.useRouter)(),V=(0,p.useSession)().data,W=(0,l.sJ)(u.Z.categoryService.categoriesState),X=(0,m.cI)(),Y=X.control,Z=X.register,$=X.handleSubmit,_=X.formState.errors,aa=X.setValue,ab=X.getValues,ac=(0,k.useState)(""),ad=ac[0],ae=ac[1],af=(0,k.useState)([]),ag=af[0],ah=af[1],ai=(0,k.useCallback)((T=(0,d.Z)(i().mark(function a(b){var c,d,h,j,k,l,m;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.keywords||confirm("키워드를 입력하지 않으면 검색되지 않습니다.\n정말 이대로 상품을 생성하시겠습니까?")){a.next=3;break}return a.abrupt("return");case 3:if(b.filters||confirm("필터를 입력하지 않으면 필터링되지 않습니다.\n정말 이대로 상품을 생성하시겠습니까?")){a.next=6;break}return a.abrupt("return");case 6:return c=n.Am.loading("상품을 등록중입니다. 잠시만 기다려주세요."),d=(0,g.Z)((0,f.Z)({},b),{option:{color:(0,s.nW)(b.option.color,",").join(),size:(0,s.nW)(b.option.size,",").join()},photo:ad,photos:ag,information:(0,g.Z)((0,f.Z)({},b.information),{price:(0,s.O6)(b.information.price)}),keywords:(0,s.nW)(b.keywords,","),filters:(0,s.nW)(b.filters,",")}),a.prev=8,a.next=11,t.Z.productService.apiCreateProduct(d);case 11:k=(j=(h=a.sent).data).message,l=j.productIdx,n.Am.update(c,{render:k,type:"success",isLoading:!1,autoClose:1500}),U.push("/product/".concat(l)),a.next=23;break;case 19:a.prev=19,a.t0=a.catch(8),console.error("error >> ",a.t0),(0,e.Z)(a.t0,x.AxiosError)?n.Am.update(c,{render:null===(m=a.t0.response)|| void 0===m?void 0:m.data.message,type:"error",isLoading:!1,autoClose:1500}):n.Am.update(c,{render:"알 수 없는 에러입니다. 잠시후에 다시 시도해주세요!",type:"error",isLoading:!1,autoClose:1500});case 23:case"end":return a.stop()}},a,null,[[8,19]])})),function(a){return T.apply(this,arguments)}),[ad,ag,U]),aj=(0,k.useCallback)(function(){var a=ab("information.price");aa("information.price",(0,s.O6)(a))},[ab,aa]),ak=(0,k.useCallback)(function(){var a=ab("information.price");aa("information.price",(0,s.Wb)(a))},[ab,aa]);return V&&V.user?"USER"===V.user.role?(0,j.jsx)(y,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v.Z,{title:"BleShop - 상품 생성",description:"BleShop의 상품 생성 페이지"}),(0,j.jsxs)(A,{onSubmit:$(ai),className:"pt-4",children:[(0,j.jsx)(B,{name:"상품명",type:"text",placeholder:"상품명을 입력해주세요.",register:Z("name",{required:{message:"상품명을 입력해주세요!",value:!0},maxLength:{message:"상품명은 최대 40자 입니다!",value:40}}),errorMessage:null===(a=_.name)|| void 0===a?void 0:a.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(B,{name:"가격",type:"text",placeholder:"가격을 입력해주세요.",register:Z("information.price",{required:{message:"가격을 입력해주세요!",value:!0}}),errorMessage:null===(b=_.information)|| void 0===b?void 0:null===(c=b.price)|| void 0===c?void 0:c.message,onFocus:aj,onBlur:ak,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(C,{name:"카테고리",register:Z("category",{required:{message:"카테고리를 선택해주세요.",value:!0}}),className:"min-w-[200px] max-w-[600px] w-full",children:W.map(function(a){var b=a.category;return(0,j.jsx)("option",{value:b,children:b},b)})}),(0,j.jsx)(B,{name:"사이즈",type:"text",placeholder:"사이즈 입력해주세요. ( 쉼표(,)로 구분해서 입력해주세요. )",register:Z("option.size"),errorMessage:null===(h=_.option)|| void 0===h?void 0:null===(q=h.size)|| void 0===q?void 0:q.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(B,{name:"색상",type:"text",placeholder:"색상 입력해주세요. ( 쉼표(,)로 구분해서 입력해주세요. )",register:Z("option.color"),errorMessage:null===(r=_.option)|| void 0===r?void 0:null===(H=r.color)|| void 0===H?void 0:H.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(D,{photoURL:ad,setPhotoURL:ae,name:"대표 이미지",register:Z("photo",{required:{message:"대표 이미지는 필수입니다!",value:!0}}),kinds:"product",errorMessage:null===(I=_.photo)|| void 0===I?void 0:I.message}),(0,j.jsx)(E,{photoURLs:ag,setPhotoURLs:ah,name:"추가 이미지",register:Z("photos"),kinds:"product",placeholder:"상품 이미지들"}),(0,j.jsx)(F,{name:"상품 설명",register:Z("description",{required:{message:"상품 설명을 입력해주세요!",value:!0},maxLength:{message:"2,000자 이내로 입력해주세요!"+"( ".concat((0,s.Wb)(ab("description")?ab("description").length:0),"/2,000 )"),value:2e3}}),errorMessage:null===(J=_.description)|| void 0===J?void 0:J.message}),(0,j.jsx)(B,{name:"브랜드",type:"text",placeholder:"브랜드를 입력해주세요.",register:Z("information.brand"),errorMessage:null===(K=_.option)|| void 0===K?void 0:null===(L=K.color)|| void 0===L?void 0:L.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(B,{name:"제조사",type:"text",placeholder:"제조사를 입력해주세요.",register:Z("information.company"),errorMessage:null===(M=_.option)|| void 0===M?void 0:null===(N=M.color)|| void 0===N?void 0:N.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(w.Z,{name:"판매 종료일",control:Y,errorMessage:(null===(O=_.information)|| void 0===O?void 0:O.period)?"판매 종료일을 선택해주세요!":""}),(0,j.jsx)(B,{name:"검색어",type:"text",placeholder:"검색어 입력해주세요. ( 쉼표(,)로 구분해서 입력해주세요. ) ex) 남자,상의",register:Z("keywords"),errorMessage:null===(P=_.option)|| void 0===P?void 0:null===(Q=P.color)|| void 0===Q?void 0:Q.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(B,{name:"검색어 필터",type:"text",placeholder:"검색어 필터 입력해주세요. ( 쉼표(,)로 구분해서 입력해주세요. ) ex) 파랑,M",register:Z("filters"),errorMessage:null===(R=_.option)|| void 0===R?void 0:null===(S=R.color)|| void 0===S?void 0:S.message,className:"min-w-[200px] max-w-[600px] w-full"}),(0,j.jsx)(G,{text:"상품 등록",type:"submit",primary:!0,className:"min-w-[200px] max-w-[600px] w-full"})]})]}):(0,j.jsx)(z,{})},I=!0;b.default=H},9396:function(a,b,c){"use strict";function d(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}c.d(b,{Z:function(){return d}})},9815:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(943),e=c(3375),f=c(1566);function g(a){return function(a){if(Array.isArray(a))return(0,d.Z)(a)}(a)||(0,e.Z)(a)||(0,f.Z)(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(a){a.O(0,[6819,7536,8956,2483,5577,9774,2888,179],function(){var b;return a(a.s=7120)}),_N_E=a.O()}])