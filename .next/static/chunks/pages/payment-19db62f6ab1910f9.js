(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8252],{71:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return c(1516)}])},1516:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(2670),f=c(1799),g=c(9396),h=c(4051),i=c.n(h),j=c(5893),k=c(7294),l=c(1163),m=c(4480),n=c(2920),o=c(5152),p=c.n(o),q=c(2483),r=c(9800),s=c(4629),t=c(9669),u=p()(function(){return c.e(565).then(c.bind(c,565))},{loadableGenerated:{webpack:function(){return[565]}},suspense:!0}),v=p()(function(){return c.e(740).then(c.bind(c,740))},{loadableGenerated:{webpack:function(){return[740]}},suspense:!0}),w=p()(function(){return c.e(8300).then(c.bind(c,8300))},{loadableGenerated:{webpack:function(){return[8300]}},suspense:!0}),x=p()(function(){return c.e(7340).then(c.bind(c,7340))},{loadableGenerated:{webpack:function(){return[7340]}},suspense:!0}),y=p()(function(){return c.e(6987).then(c.bind(c,6987))},{loadableGenerated:{webpack:function(){return[6987]}},suspense:!0}),z=function(){var a=(0,l.useRouter)();(0,k.useEffect)(function(){n.Am.info("테스트용 결제이며, 실제로 결제가 되지 않습니다.");var a=document.createElement("script");a.src="https://code.jquery.com/jquery-1.12.4.min.js";var b=document.createElement("script");return b.src="https://cdn.iamport.kr/js/iamport.payment-1.1.8.js",document.head.appendChild(a),document.head.appendChild(b),function(){document.head.removeChild(a),document.head.removeChild(b)}},[]);var b=(0,m.sJ)(r.Z.paymentService.productToPayment),c=(0,k.useCallback)(function(c){return function(){var h;if(!b)return n.Am.error("결제할 상품의 정보가 존재하지 않습니다. 메인 화면으로 이동됩니다."),a.push("/");window.IMP.init("imp58432588"),window.IMP.request_pay((0,g.Z)((0,f.Z)({},b),{pg:c,pay_method:"card"}),(h=(0,d.Z)(i().mark(function b(c){var d;return i().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!c.buyer_name||!c.buyer_addr||!c.paid_amount||!c.buyer_email||!c.buyer_tel||!c.pg_provider)){b.next=2;break}return b.abrupt("return",n.Am.warning("결제에 필요한 데이터가 부족합니다."));case 2:if(!c.success){b.next=16;break}return b.prev=3,b.next=6,q.Z.orderService.apiCreateOrder({singleData:c.custom_data.singleData,orderData:{name:c.buyer_name,address:c.buyer_addr,residence:c.custom_data.residence,message:c.custom_data.message,amount:c.paid_amount,email:c.buyer_email,phone:c.buyer_tel,provider:c.pg_provider}});case 6:n.Am.success("결제가 완료되었습니다. 2초뒤에 결제내역 페이지로 이동합니다.",{autoClose:2e3}),setTimeout(function(){return a.push("/information/order")},2e3),b.next=14;break;case 10:b.prev=10,b.t0=b.catch(3),console.error("error >> ",b.t0),(0,e.Z)(b.t0,t.AxiosError)?n.Am.error(null===(d=b.t0.response)|| void 0===d?void 0:d.data.message):n.Am.error("알 수 없는 문제로 인해 결제에 실패했습니다.");case 14:b.next=17;break;case 16:n.Am.error("결제에 실패했습니다. "+c.error_msg,{autoClose:2e3});case 17:case"end":return b.stop()}},b,null,[[3,10]])})),function(a){return h.apply(this,arguments)}))}},[a,b]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.Z,{title:"BleShop - 결제",description:"BleShop의 결제 페이지입니다."}),(0,j.jsxs)("article",{className:"pt-4 space-y-4",children:[(0,j.jsx)(x,{title:"돌아가기"}),(0,j.jsxs)(u,{className:"space-y-2 sm:space-y-4",hasPadding:!0,children:[(0,j.jsx)(v,{text:"결제"}),(0,j.jsxs)("ul",{className:"space-y-2 sm:space-y-4",children:[(0,j.jsxs)("li",{className:"flex flex-col",children:[(0,j.jsx)(w,{text:"토스로 결제"}),(0,j.jsx)(y,{type:"button",onClick:c("tosspay"),className:"bg-blue-400 p-2 rounded-md text-white sm:text-lg font-bold hover:bg-blue-500 focus:outline-none focus:bg-blue-500 transition-colors",text:"toss"})]}),(0,j.jsxs)("li",{className:"flex flex-col",children:[(0,j.jsx)(w,{text:"카카오페이로 결제"}),(0,j.jsx)(y,{type:"button",onClick:c("kakaopay"),className:"bg-yellow-300 p-2 rounded-md text-black sm:text-lg font-bold hover:bg-yellow-400 focus:outline-none focus:bg-yellow-400 transition-colors",text:"kakaopay"})]})]})]})]})]})};b.default=z},9396:function(a,b,c){"use strict";function d(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}c.d(b,{Z:function(){return d}})},9815:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(943),e=c(3375),f=c(1566);function g(a){return function(a){if(Array.isArray(a))return(0,d.Z)(a)}(a)||(0,e.Z)(a)||(0,f.Z)(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(a){a.O(0,[6819,2483,5577,9774,2888,179],function(){var b;return a(a.s=71)}),_N_E=a.O()}])