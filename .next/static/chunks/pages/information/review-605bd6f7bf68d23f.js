(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3930],{4891:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/information/review",function(){return c(3529)}])},638:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(6856).Z;Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b){var c=g.default,f={loading:function(a){return a.error,a.isLoading,a.pastDelay,null}};if(d(a,Promise)?f.loader=function(){return a}:"function"==typeof a?f.loader=a:"object"==typeof a&&(f=e({},f,a)),(f=e({},f,b)).loadableGenerated&&delete(f=e({},f,f.loadableGenerated)).loadableGenerated,"boolean"==typeof f.ssr&&!f.suspense){if(!f.ssr)return delete f.ssr,h(c,f);delete f.ssr}return c(f)},b.noSSR=h;var e=c(6495).Z,f=c(2648).Z,g=(f(c(7294)),f(c(4302)));function h(a,b){return delete b.webpack,delete b.modules,a(b)}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&& void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},6319:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoadableContext=void 0;var d=(0,c(2648).Z)(c(7294)).default.createContext(null);b.LoadableContext=d},4302:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(9658).Z,e=c(7222).Z;Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=c(6495).Z,g=(0,c(2648).Z)(c(7294)),h=c(6319),i=c(7294).useSyncExternalStore,j=[],k=[],l=!1;function m(a){var b=a(),c={loading:!0,loaded:null,error:null};return c.promise=b.then(function(a){return c.loading=!1,c.loaded=a,a}).catch(function(a){throw c.loading=!1,c.error=a,a}),c}var n=function(){function a(b,c){d(this,a),this._loadFn=b,this._opts=c,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return e(a,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var a=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var b=this._res,c=this._opts;b.loading&&("number"==typeof c.delay&&(0===c.delay?this._state.pastDelay=!0:this._delay=setTimeout(function(){a._update({pastDelay:!0})},c.delay)),"number"==typeof c.timeout&&(this._timeout=setTimeout(function(){a._update({timedOut:!0})},c.timeout))),this._res.promise.then(function(){a._update({}),a._clearTimeouts()}).catch(function(b){a._update({}),a._clearTimeouts()}),this._update({})}},{key:"_update",value:function(a){this._state=f({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},a),this._callbacks.forEach(function(a){return a()})}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(a){var b=this;return this._callbacks.add(a),function(){b._callbacks.delete(a)}}}]),a}();function o(a){return function(a,b){var c=function(){if(!o){var b=new n(a,m);o={getCurrentValue:b.getCurrentValue.bind(b),subscribe:b.subscribe.bind(b),retry:b.retry.bind(b),promise:b.promise.bind(b)}}return o.promise()},d=function(){c();var a=g.default.useContext(h.LoadableContext);a&&Array.isArray(m.modules)&&m.modules.forEach(function(b){a(b)})},e=function(a,b){d();var c=i(o.subscribe,o.getCurrentValue,o.getCurrentValue);return g.default.useImperativeHandle(b,function(){return{retry:o.retry}},[]),g.default.useMemo(function(){var b;return c.loading||c.error?g.default.createElement(m.loading,{isLoading:c.loading,pastDelay:c.pastDelay,timedOut:c.timedOut,error:c.error,retry:o.retry}):c.loaded?g.default.createElement((b=c.loaded)&&b.__esModule?b.default:b,a):null},[a,c])},j=function(a,b){return d(),g.default.createElement(m.lazy,f({},a,{ref:b}))},m=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},b);m.suspense&&(m.lazy=g.default.lazy(m.loader));var o=null;if(!l){var p=m.webpack?m.webpack():m.modules;p&&k.push(function(a){var b=!0,d=!1,e=void 0;try{for(var f,g=p[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;if(-1!==a.indexOf(h))return c()}}catch(i){d=!0,e=i}finally{try{b||null==g.return||g.return()}finally{if(d)throw e}}})}var q=m.suspense?j:e;return q.preload=function(){return c()},q.displayName="LoadableComponent",g.default.forwardRef(q)}(m,a)}function p(a,b){for(var c=[];a.length;){var d=a.pop();c.push(d(b))}return Promise.all(c).then(function(){if(a.length)return p(a,b)})}o.preloadAll=function(){return new Promise(function(a,b){p(j).then(a,b)})},o.preloadReady=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[];return new Promise(function(b){var c=function(){return l=!0,b()};p(k,a).then(c,c)})},window.__NEXT_PRELOADREADY=o.preloadReady,b.default=o},5797:function(a,b,c){"use strict";c.d(b,{ie:function(){return f},vc:function(){return d}});var d=function(a,b,c){var d=new Date(a),e=[],f="",g=b.match(/[^YMDhms]/g),n=0;return e.push(h(d,b)),e.push(i(d,b)),e.push(j(d,b)),e.push(k(d,b)),e.push(l(d,b)),e.push(m(d,b)),e.forEach(function(a){if(a){if(c)return f+="".concat(a).concat(c);var b="";g?b=g[n]||"":c="",n++,f+="".concat(a).concat(b)}}),f},e=function(a){var b=new Date(a),c=new Date().getTime()-b.getTime();return c/1e3<60?"".concat(Math.floor(c/1e3),"초전"):c/1e3/60<60?"".concat(Math.floor(c/1e3/60),"분전"):c/1e3/60/60<24?"".concat(Math.floor(c/1e3/60/60),"시간전"):c/1e3/60/60/24<30?"".concat(Math.floor(c/1e3/60/60/24),"일전"):c/1e3/60/60/24/30<12?"".concat(Math.floor(c/1e3/60/60/24/30),"개월전"):"".concat(Math.floor(c/1e3/60/60/24/30/12),"년전")},f=function(a,b){return Date.now()-new Date(a).getTime()>6048e5?d(a,b):e(a)},g=function(a){switch(a){case"year":return/Y{2}/g;case"month":return/M/g;case"day":return/D/g;case"hour":return/h/g;case"minute":return/m/g;case"second":return/s/g}},h=function(a,b){var c=b.match(g("year"));if(null!==c){if(1===c.length)return+String(a.getFullYear()).slice(2);if(2===c.length)return a.getFullYear()}},i=function(a,b){var c=null,d=b.match(g("month"));if(null!==d)return c=a.getMonth()+1,2===d.length&&c<10&&(c="0".concat(c)),c},j=function(a,b){var c=null,d=b.match(g("day"));if(null!==d)return c=a.getDate(),2===d.length&&c<10&&(c="0".concat(c)),c},k=function(a,b){var c=null,d=b.match(g("hour"));if(null!==d)return c=a.getHours(),2===d.length&&c<10&&(c="0".concat(c)),c},l=function(a,b){var c=null,d=b.match(g("minute"));if(null!==d)return c=a.getMinutes(),(null==d?void 0:d.length)===2&&c<10&&(c="0".concat(c)),c},m=function(a,b){var c=null,d=b.match(g("second"));if(null!==d)return c=a.getSeconds(),(null==d?void 0:d.length)===2&&c<10&&(c="0".concat(c)),c}},3529:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(4051),f=c.n(e),g=c(5893),h=c(7294),i=c(1664),j=c.n(i),k=c(2920),l=c(5152),m=c.n(l),n=c(3299),o=c(2483),p=c(9923),q=c(5797),r=c(4629),s=m()(function(){return c.e(565).then(c.bind(c,565))},{loadableGenerated:{webpack:function(){return[565]}},suspense:!0}),t=m()(function(){return c.e(7179).then(c.bind(c,7179))},{loadableGenerated:{webpack:function(){return[7179]}},suspense:!0}),u=m()(function(){return c.e(7340).then(c.bind(c,7340))},{loadableGenerated:{webpack:function(){return[7340]}},suspense:!0}),v=m()(function(){return c.e(8300).then(c.bind(c,8300))},{loadableGenerated:{webpack:function(){return[8300]}},suspense:!0}),w=m()(function(){return Promise.all([c.e(5675),c.e(1304)]).then(c.bind(c,1304))},{loadableGenerated:{webpack:function(){return[1304]}},suspense:!0}),x=m()(function(){return Promise.resolve().then(c.bind(c,6193))},{loadableGenerated:{webpack:function(){return[6193]}},suspense:!0}),y=m()(function(){return c.e(3989).then(c.bind(c,3989))},{loadableGenerated:{webpack:function(){return[3989]}},suspense:!0}),z=m()(function(){return Promise.all([c.e(7842),c.e(3231)]).then(c.bind(c,5129))},{loadableGenerated:{webpack:function(){return[5129]}},suspense:!0}),A=m()(function(){return c.e(1566).then(c.bind(c,1867))},{loadableGenerated:{webpack:function(){return[1867]}},suspense:!0}),B=function(){var a=(0,n.useSession)().status,b=(0,h.useState)([]),c=b[0],e=b[1];(0,h.useEffect)(function(){(0,d.Z)(f().mark(function a(){var b,c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.Z.userService.apiGetReviews();case 2:e(c=(b=a.sent).data.reviews);case 5:case"end":return a.stop()}},a)}))()},[e]);var i=(0,h.useCallback)(function(a){return function(){confirm("리뷰를 제거하면 다시 작성하실 수 없습니다.\n그래도 진행하시겠습니까?")&&o.Z.reviewService.apiDeleteReview({reviewIdx:a}).then(function(b){var c=b.data.message;e(function(b){return b.filter(function(b){return b.idx!==a})}),k.Am.success(c)}).catch(function(a){console.error(a),k.Am.error("알 수 없는 이유로 리뷰를 제거하는데 실패했습니다.")})}},[]),l=(0,h.useState)(!1),m=l[0],B=l[1],C=(0,h.useState)([]),D=C[0],E=C[1],F=(0,h.useState)(0),G=F[0],H=F[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.Z,{title:"BleShop - 리뷰 관리",description:"BleShop의 리뷰 관리 페이지입니다."}),(0,g.jsxs)("article",{className:"pt-4 space-y-4",children:[(0,g.jsx)(u,{title:"돌아가기"}),"authenticated"===a?(0,g.jsxs)(s,{hasPadding:!0,className:"space-y-2",children:[(0,g.jsx)(v,{text:"작성한 리뷰들 ( ".concat(c.length,"개 )")}),0===c.length&&(0,g.jsx)(t,{text:"** 작성한 리뷰가 없습니다. **"}),(0,g.jsx)("ul",{className:"space-y-4",children:c.map(function(a,b){return(0,g.jsxs)("li",{children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)(j(),{href:"/product/".concat(a.Product.idx),children:(0,g.jsxs)("a",{className:"flex items-center space-x-2 mb-2 outline-blue-400 outline-offset-2",children:[(0,g.jsx)(w,{path:a.Product.photo,className:"w-14 h-14 xs:w-18 xs:h-18 sm:w-20 sm:h-20",alt:"상품 대표 이미지",cover:!0}),(0,g.jsx)("span",{className:"sm:text-lg font-bolder",children:a.Product.name})]})}),(0,g.jsx)("button",{type:"button",className:"self-start py-1 px-1.5 text-[8px] sm:text-xs border border-blue-400 rounded-md text-blue-400 bg-white hover:bg-blue-400 hover:text-white focus:outline-none focus:bg-blue-400 focus:text-white transition-colors",onClick:i(a.idx),children:"리뷰 제거"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,g.jsx)("div",{className:"flex",children:[,,,,,].fill(null).map(function(b,c){return(0,g.jsx)(x,{shape:"star",fill:!0,className:(0,p.Nn)("w-5 h-5 sm:w-6 sm:h-6",a.score>=c+1?"text-yellow-400":"text-gray-400")},c+1)})}),(0,g.jsx)("time",{className:"text-[8px] sm:text-xs text-gray-400",children:(0,q.ie)(a.updatedAt,"YYYY-MM<-DD")})]}),a.photos.length>=1&&(0,g.jsx)("ul",{className:"flex space-x-1 mb-2 cursor-pointer focus:outline-blue-400 focus:outline-offset-2",onClick:function(){E(a.photos.map(function(a){return a.path})),B(!0)},tabIndex:0,children:a.photos.map(function(a){return(0,g.jsx)("li",{children:(0,g.jsx)(w,{path:a.path,className:"w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16",alt:"상품 대표 이미지",cover:!0})},a.path)})}),(0,g.jsx)("p",{className:"text-sm sm:text-base whitespace-pre-wrap bg-gray-200 p-4",children:a.contents}),c.length-1!==b&&(0,g.jsx)("hr",{className:"my-4 border-2"})]},a.idx)})}),m&&(0,g.jsx)(y,{onCloseModal:function(){return B(!1)},children:(0,g.jsx)(z,{currentDot:G,setCurrentDot:H,className:"overflow-hidden",children:D.map(function(a){return(0,g.jsx)(w,{path:a,className:"w-full h-[30vh] xs:h-[40vh] sm:h-[60vh] md:h-[80vh]",alt:"리뷰 이미지",contain:!0},a)})})})]}):(0,g.jsx)(A,{})]})]})};b.default=B},5152:function(a,b,c){a.exports=c(638)},9815:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(943),e=c(3375),f=c(1566);function g(a){return function(a){if(Array.isArray(a))return(0,d.Z)(a)}(a)||(0,e.Z)(a)||(0,f.Z)(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(a){a.O(0,[6819,2483,9774,2888,179],function(){var b;return a(a.s=4891)}),_N_E=a.O()}])