"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3195,565,740,1304,8300,7179],{3195:function(a,b,c){c.r(b);var d=c(7568),e=c(2670),f=c(828),g=c(9815),h=c(4051),i=c.n(h),j=c(5893),k=c(7294),l=c(4480),m=c(1664),n=c.n(m),o=c(2920),p=c(2483),q=c(9923),r=c(5797),s=c(9800),t=c(1304),u=c(695),v=c(9669),w=function(a){var b,c=a.productIdx,h=a.keywords,m=(0,f.Z)((0,l.FV)(s.Z.productService.relatedProductsState),2),w=m[0],x=m[1],y=(0,l.sJ)(s.Z.productService.relatedProductsLastIdxState),z=(0,k.useState)(null),A=z[0],B=z[1],C=(0,k.useCallback)((b=(0,d.Z)(i().mark(function a(b){var d,j,k,l,m;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(j=(d=(0,f.Z)(b,1))[0].isIntersecting,A){a.next=3;break}return a.abrupt("return");case 3:if(!j){a.next=16;break}return a.prev=4,a.next=7,p.Z.productService.apiGetRelatedProducts({limit:15,lastIdx:y,productIdx:c,keywords:h});case 7:l=(k=a.sent).data.products,x(function(a){return(0,g.Z)(a).concat((0,g.Z)(l))}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),console.error(a.t0),(0,e.Z)(a.t0,v.AxiosError)?o.Am.error(null===(m=a.t0.response)|| void 0===m?void 0:m.data.message):o.Am.error("알 수 없는 에러가 발생했습니다.");case 16:case"end":return a.stop()}},a,null,[[4,12]])})),function(a){return b.apply(this,arguments)}),[c,h,A,y,x]);return(0,k.useEffect)(function(){if(A&&w.length%15==0){var a=new IntersectionObserver(C,{threshold:.1,rootMargin:"20px"});return a.observe(A),function(){return null==a?void 0:a.disconnect()}}},[A,C,w]),(0,j.jsx)(j.Fragment,{children:0===w.length?(0,j.jsx)(u.Z.Error,{text:"조건에 맞는 상품이 없습니다."}):(0,j.jsx)("ul",{className:"grid grid-cols-1 xsm:grid-cols-2 md:grid-cols-3 gap-2",children:w.map(function(a,b){return(0,j.jsxs)("li",{className:"group relative flex flex-col shadow-lg rounded-md bg-gray-100 overflow-hidden hover:overflow-visible",ref:function(a){return w.length===b+1?B(a):null},children:[(0,j.jsx)(n(),{href:"/product/".concat(a.idx),children:(0,j.jsxs)("a",{className:"flex flex-col h-full rounded-md bg-white border-4 border-transparent z-[2] group-hover:border-gray-400 focus:outline-blue-400 focus:outline-4",children:[(0,j.jsx)(t.default,{path:a.photo,cover:!0,className:"h-60"}),(0,j.jsxs)("div",{className:"flex-1 flex flex-col space-y-2 px-2 py-1",children:[(0,j.jsx)("h3",{className:"font-bolder text-xl",children:a.name}),(0,j.jsx)("p",{className:"flex-1 whitespace-pre overflow-hidden text-ellipsis",children:a.description}),(0,j.jsxs)("div",{className:"flex justify-between",children:[(0,j.jsxs)("span",{children:[(0,q.Wb)(a.price),"원"]}),(0,j.jsx)("time",{className:"text-xs sm:text-sm text-gray-400",children:(0,r.ie)(a.updatedAt,"YYYY-MM-DD-hh-mm-ss")})]})]})]})}),(0,j.jsx)("div",{className:"absolute top-0 left-0 w-full h-full rounded-md bg-gray-400 -z-10 group-hover:animate-my-ping group-hover:z-[1]"})]},a.idx)})})})};b.default=k.memo(w)},1304:function(a,b,c){c.r(b);var d=c(5893),e=c(7294),f=c(5675),g=c.n(f),h=c(9923),i=function(a){var b=a.path,c=a.className,f=a.alt,i=a.cover,j=a.contain,k=a.priority,l=a.avatar,m=a.isFocus,n=a.onClick,o=(0,e.useRef)(null),p=(0,e.useCallback)(function(){"function"==typeof n&&n()},[n]);return(0,d.jsx)(d.Fragment,{children:b?(0,d.jsx)("figure",{className:(0,h.Nn)("relative bg-black",m?"focus:ring-2 focus:ring-blue-400 focus:ring-offset-4":"",l?"rounded-full":"rounded-md",c||""),tabIndex:"function"==typeof n?0:-1,onClick:p,ref:o,onKeyDown:function(a){var b;return"Enter"===a.key?null===(b=o.current)|| void 0===b?void 0:b.click():null},children:(0,d.jsx)(g(),{src:b.includes("http")?b:(0,h.eV)(b),layout:"fill",className:(0,h.Nn)(l?"rounded-full":"",i?"object-cover":"",j?"object-contain":""),alt:f,priority:k})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("figure",{className:(0,h.Nn)("relative bg-black",l?"rounded-full":"rounded-md",c||""),onClick:p,tabIndex:"function"==typeof n?0:-1,ref:o,onKeyDown:function(a){var b;return"Enter"===a.key?null===(b=o.current)|| void 0===b?void 0:b.click():null},children:(0,d.jsx)(g(),{src:"/user.png",layout:"fill",className:(0,h.Nn)(l?"rounded-full":"rounded-md",i?"object-cover":"",j?"object-contain":""),alt:f,priority:k})})})})};b.default=i},565:function(a,b,c){c.r(b);var d=c(5893),e=c(9923),f=function(a){var b=a.children,c=a.className,f=a.hasPadding;return(0,d.jsx)("section",{className:(0,e.Nn)("min-w-[250px] bg-white rounded-md shadow-2xl",f?"p-2 xsm:p-3 md:p-4":"",c||""),children:b})};b.default=f},7179:function(a,b,c){c.r(b);var d=c(5893),e=c(9923),f=function(a){var b=a.text,c=a.className;return(0,d.jsx)("h6",{className:(0,e.Nn)("text-center font-bolder text-red-500",c||""),children:b})};b.default=f},8300:function(a,b,c){c.r(b);var d=c(5893),e=function(a){var b=a.text;return(0,d.jsx)("h5",{className:"pl-1 text-gray-800 font-bolder text-sm xs:text-base md:text-lg",children:b})};b.default=e},740:function(a,b,c){c.r(b);var d=c(5893),e=function(a){var b=a.text;return(0,d.jsx)("h4",{className:"text-gray-800 font-bolder text-lg xs:text-xl md:text-2xl",children:b})};b.default=e},695:function(a,b,c){var d=c(740),e=c(8300),f=c(7179),g=c(565),h={Title:d.default,SubTitle:e.default,Error:f.default,Background:g.default};b.Z=h}}])