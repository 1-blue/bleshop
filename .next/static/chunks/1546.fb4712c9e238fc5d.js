"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1546,565,740,5328,8300,3989,7179],{5328:function(a,b,c){c.r(b);var d=c(7568),e=c(1799),f=c(9396),g=c(4051),h=c.n(g),i=c(5893),j=c(7294),k=c(1664),l=c.n(k),m=c(1163),n=c(3299),o=c(4480),p=c(2483),q=c(9800),r=c(9923),s=c(3989),t=c(695),u=function(a){var b=a.products,c=a.singleData,g=a.onCloseModal,k=(0,n.useSession)().data,u=(0,m.useRouter)(),v=(0,o.Zl)(q.Z.paymentService.productToPayment),w=(0,j.useState)([]),x=w[0],y=w[1];(0,j.useEffect)(function(){(0,d.Z)(h().mark(function a(){var b,c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.Z.addressService.apiGetAllAddress();case 2:y(c=(b=a.sent).data.addresses);case 5:case"end":return a.stop()}},a)}))()},[]);var z=(0,j.useCallback)(function(a){return function(){if(null==k?void 0:k.user){g();var d=a.address.slice(a.address.indexOf("[")+1,a.address.lastIndexOf("]"));if(1===b.length){var h=b[0];v({escrow:!1,merchant_uid:"mid_".concat(Date.now()),name:h.name,amount:h.price*c[0].quantity,custom_data:{residence:a.residence,message:a.message,singleData:[(0,f.Z)((0,e.Z)({},c[0]),{productIdx:h.idx}),]},language:"ko",buyer_name:a.name,buyer_tel:a.phone,buyer_email:k.user.email,buyer_addr:a.address,buyer_postcode:d,m_redirect_url:"https://bleshop.shop/api/payment/complete/mobile"})}else v({escrow:!1,merchant_uid:"mid_".concat(Date.now()),name:b[0].name+"외 ".concat(b.length-1,"개"),amount:c.map(function(a,c){return a.quantity*b[c].price}).reduce(function(a,b){return a+b}),custom_data:{residence:a.residence,message:a.message,singleData:c.map(function(a,c){return(0,f.Z)((0,e.Z)({},a),{productIdx:b[c].idx})})},language:"ko",buyer_name:a.name,buyer_tel:a.phone,buyer_email:k.user.email,buyer_addr:a.address,buyer_postcode:d,m_redirect_url:"https://bleshop.shop/api/payment/complete/mobile"});u.push("/payment")}}},[k,b,g,v,c,u]);return(0,i.jsxs)(s.default,{onCloseModal:g,className:"space-y-2 max-w-[500px] min-w-[250px]",children:[(0,i.jsx)("h6",{className:"text-base sm:text-xl md:text-2xl font-bolder text-center bg-indigo-400 py-2 text-white",children:"배송지 선택"}),(0,i.jsxs)("ul",{className:"space-y-3 flex flex-col px-4 py-2",children:[x.map(function(a){return(0,i.jsx)("li",{children:(0,i.jsxs)("button",{type:"button",className:"flex flex-col w-full bg-gray-200 p-2 rounded-md space-y-0.5 hover:bg-indigo-300 hover:text-white focus:outline-none focus:bg-indigo-400 focus:text-white transition-colors",onClick:z(a),children:[(0,i.jsxs)("div",{className:"font-bold",children:[(0,i.jsx)("span",{className:"md:text-lg",children:a.name}),a.isDefault&&(0,i.jsx)("span",{className:"inline-block text-[8px] p-1 ml-1 text-blue-400 bg-white border-blue-400 border rounded-full",children:"기본배송지"})]}),(0,i.jsx)("span",{className:"text-xs md:text-sm",children:a.address}),(0,i.jsx)("span",{className:"text-xs md:text-sm",children:a.residence}),(0,i.jsx)("span",{className:"text-xs md:text-sm",children:(0,r.lM)(a.phone)})]})},a.idx)}),0===x.length&&(0,i.jsx)(t.Z.Error,{text:"** 등록된 배송지가 없습니다. **",className:"py-4 text-sm md:text-base"}),(0,i.jsx)(l(),{href:"/information/address",children:(0,i.jsx)("a",{className:"text-[8px] md:text-xs self-end hover:text-blue-400 hover:underline hover:underline-offset-2 focus:outline-none focus:text-blue-400 focus:underline focus:underline-offset-2",children:"배송지 등록"})})]})]})};b.default=u},3989:function(a,b,c){c.r(b);var d=c(5893),e=c(7294),f=c(9923),g=function(a){var b=a.children,c=a.onCloseModal,g=a.title,h=a.className,i=(0,e.useRef)(null),j=(0,e.useCallback)(function(a){i.current===a.target&&c()},[i,c]);return(0,e.useEffect)(function(){return window.addEventListener("click",j),function(){return window.removeEventListener("click",j)}},[j]),(0,e.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}},[]),(0,d.jsx)("aside",{className:"fixed top-0 left-0 bg-black/60 w-full h-full animate-fade-in z-[10]",ref:i,style:{margin:0},children:(0,d.jsxs)("aside",{className:(0,f.Nn)("absolute top-1/2 left-1/2 w-2/3 rounded-md bg-white -translate-x-1/2 -translate-y-1/2 overflow-y-auto",h||""),children:[g&&(0,d.jsx)("h3",{className:"text-base sm:text-xl md:text-2xl text-center text-white font-bolder py-2 xs:py-3 bg-blue-400",children:g}),b]})})};b.default=g},565:function(a,b,c){c.r(b);var d=c(5893),e=c(9923),f=function(a){var b=a.children,c=a.className,f=a.hasPadding;return(0,d.jsx)("section",{className:(0,e.Nn)("min-w-[250px] bg-white rounded-md shadow-2xl",f?"p-2 xsm:p-3 md:p-4":"",c||""),children:b})};b.default=f},7179:function(a,b,c){c.r(b);var d=c(5893),e=c(9923),f=function(a){var b=a.text,c=a.className;return(0,d.jsx)("h6",{className:(0,e.Nn)("text-center font-bolder text-red-500",c||""),children:b})};b.default=f},8300:function(a,b,c){c.r(b);var d=c(5893),e=function(a){var b=a.text;return(0,d.jsx)("h5",{className:"pl-1 text-gray-800 font-bolder text-sm xs:text-base md:text-lg",children:b})};b.default=e},740:function(a,b,c){c.r(b);var d=c(5893),e=function(a){var b=a.text;return(0,d.jsx)("h4",{className:"text-gray-800 font-bolder text-lg xs:text-xl md:text-2xl",children:b})};b.default=e},695:function(a,b,c){var d=c(740),e=c(8300),f=c(7179),g=c(565),h={Title:d.default,SubTitle:e.default,Error:f.default,Background:g.default};b.Z=h},9396:function(a,b,c){c.d(b,{Z:function(){return d}});function d(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}},9815:function(a,b,c){c.d(b,{Z:function(){return g}});var d=c(943),e=c(3375),f=c(1566);function g(a){return function(a){if(Array.isArray(a))return(0,d.Z)(a)}(a)||(0,e.Z)(a)||(0,f.Z)(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}])